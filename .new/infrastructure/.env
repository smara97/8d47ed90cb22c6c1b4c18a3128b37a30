# ============================================================================
# Video RAG Infrastructure - Common Services Configuration
# ============================================================================
# Configuration for infrastructure services only (Kafka, Zookeeper, MinIO, Qdrant)
# Each microservice has its own .env file in its service directory
# ============================================================================

# ----------------------------------------------------------------------------
# Network Configuration (OrbStack Compatible)
# ----------------------------------------------------------------------------
NETWORK_NAME=video-rag-network

# OrbStack Domain Configuration
# Services automatically accessible via: <container-name>.video-rag.orb.local

# ----------------------------------------------------------------------------
# Zookeeper Configuration (OrbStack Compatible)
# ----------------------------------------------------------------------------
ZOOKEEPER_SERVICE_NAME=zookeeper
ZOOKEEPER_CLIENT_PORT=2181
ZOOKEEPER_TICK_TIME=2000
ZOOKEEPER_SYNC_LIMIT=2
ZOOKEEPER_HOST_PORT=2181
ZOOKEEPER_CONTAINER_NAME=zookeeper
# OrbStack domain: zookeeper.video-rag.orb.local:2181
ZOOKEEPER_VOLUME_DATA=video-rag-zookeeper-data
ZOOKEEPER_VOLUME_LOGS=video-rag-zookeeper-logs
ZOOKEEPER_IMAGE=confluentinc/cp-zookeeper:7.5.0

# ----------------------------------------------------------------------------
# Kafka Configuration (OrbStack Compatible)
# ----------------------------------------------------------------------------
KAFKA_SERVICE_NAME=kafka
KAFKA_BROKER_ID=1
KAFKA_CONTAINER_NAME=kafka
KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181
KAFKA_LISTENER_PORT_INTERNAL=9092
KAFKA_LISTENER_PORT_EXTERNAL=9093
KAFKA_HOST_PORT_INTERNAL=9092
KAFKA_HOST_PORT_EXTERNAL=9093
# OrbStack domain: kafka.video-rag.orb.local:9092
KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR=1
KAFKA_AUTO_CREATE_TOPICS_ENABLE=true
KAFKA_LOG_RETENTION_HOURS=1
KAFKA_LOG_SEGMENT_BYTES=1073741824
KAFKA_MESSAGE_MAX_BYTES=10485760
KAFKA_REPLICA_FETCH_MAX_BYTES=10485760
KAFKA_VOLUME_DATA=video-rag-kafka-data
KAFKA_IMAGE=confluentinc/cp-kafka:7.5.0

# ----------------------------------------------------------------------------
# Kafka UI Configuration (OrbStack Compatible)
# ----------------------------------------------------------------------------
KAFKA_UI_CONTAINER_NAME=kafka-ui
# OrbStack domain: kafka-ui.video-rag.orb.local
KAFKA_UI_HOST_PORT=8080
KAFKA_UI_CLUSTER_NAME=video-rag-cluster
KAFKA_UI_IMAGE=provectuslabs/kafka-ui:latest

# ----------------------------------------------------------------------------
# MinIO Configuration (OrbStack Compatible)
# ----------------------------------------------------------------------------
MINIO_SERVICE_NAME=minio
MINIO_CONSOLE_SERVICE_NAME=minio-console
MINIO_CONTAINER_NAME=minio
# OrbStack domain: minio.video-rag.orb.local (ports 9000/9001)
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_HOST_API_PORT=9000
MINIO_HOST_CONSOLE_PORT=9001
MINIO_VOLUME_DATA=video-rag-minio-data
MINIO_IMAGE=minio/minio:latest

# ----------------------------------------------------------------------------
# Qdrant Configuration (OrbStack Compatible)
# ----------------------------------------------------------------------------
QDRANT_SERVICE_NAME=qdrant
QDRANT_CONTAINER_NAME=qdrant
# OrbStack domain: qdrant.video-rag.orb.local (ports 6333/6334)
QDRANT_REST_PORT=6333
QDRANT_GRPC_PORT=6334
QDRANT_HOST_REST_PORT=6333
QDRANT_HOST_GRPC_PORT=6334
QDRANT_VOLUME_DATA=video-rag-qdrant-data
QDRANT_COLLECTION=video_segments
QDRANT_IMAGE=qdrant/qdrant:latest

# ----------------------------------------------------------------------------
# Kafka Topics (shared across services)
# ----------------------------------------------------------------------------
KAFKA_TOPIC_RAW_FRAMES=raw-frames
KAFKA_TOPIC_OCR_RESULTS=ocr-results
KAFKA_TOPIC_DETECTION_RESULTS=detection-results
KAFKA_TOPIC_CAPTION_RESULTS=caption-results
KAFKA_TOPIC_EMBEDDING_RESULTS=embedding-results
KAFKA_TOPIC_SCENE_GRAPH_RESULTS=scene-graph-results
KAFKA_TOPIC_AGGREGATED_METADATA=aggregated-frame-metadata
KAFKA_TOPIC_FRAME_SUMMARIES=frame-summaries
KAFKA_TOPIC_VIDEO_SEGMENTS=video-segments

# ----------------------------------------------------------------------------
# Service Configuration (OrbStack Compatible)
# ----------------------------------------------------------------------------
# OCR Service
OCR_SERVICE_CONTAINER_NAME=ocr-service
OCR_SERVICE_HOST_PORT=8001
OCR_SERVICE_INTERNAL_PORT=8000
OCR_SERVICE_CONSUMER_GROUP=ocr-service-group
OCR_SERVICE_NAME=ocr-service

# Detector Service
DETECTOR_SERVICE_CONTAINER_NAME=detector-service
DETECTOR_SERVICE_HOST_PORT=8002
DETECTOR_SERVICE_INTERNAL_PORT=8000
DETECTOR_SERVICE_CONSUMER_GROUP=detector-service-group
DETECTOR_SERVICE_NAME=detector-service
DETECTOR_MODEL_PATH=/app/models/yolo11n.pt

# Captioner Service
CAPTIONER_SERVICE_CONTAINER_NAME=captioner-service
CAPTIONER_SERVICE_HOST_PORT=8003
CAPTIONER_SERVICE_INTERNAL_PORT=8000
CAPTIONER_SERVICE_CONSUMER_GROUP=captioner-service-group
CAPTIONER_SERVICE_NAME=captioner-service

# ----------------------------------------------------------------------------
# General Configuration (shared by all services)
# ----------------------------------------------------------------------------
LOG_LEVEL=INFO
KAFKA_BOOTSTRAP_SERVERS=kafka:9092
